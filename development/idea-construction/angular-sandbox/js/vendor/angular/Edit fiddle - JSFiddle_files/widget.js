(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}},i=function(e,t){function n(){this.constructor=e}for(var i in t)s.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;e=function(){function e(){}return e.prototype.vendorPrefix=function(){var e,t;return t=navigator.userAgent,e=t.indexOf("Chrome")>=0||t.indexOf("Safari")>=0?"webkit":t.indexOf("Trident")>=0||t.indexOf("Edge")>=0?"ms":t.indexOf("Gecko")>=0&&t.indexOf("Firefox")>=0?"moz":void 0,"-"+e},e}(),new(t=function(e){function t(){this.update=n(this.update,this),this.widgetReady=n(this.widgetReady,this),this.setHeight=n(this.setHeight,this),this.setBadge=n(this.setBadge,this),this.toggle=n(this.toggle,this),this.reload=n(this.reload,this),this.hide=n(this.hide,this),this.show=n(this.show,this),this.attachListeners=n(this.attachListeners,this),this.createElements=n(this.createElements,this),this.setup=n(this.setup,this),this.declared="HW_UID_"+~~((new Date).getTime()/864e5),this.visible=!1,this.softHide=!1,window[this.declared]||(window[this.declared]=!0,window.setTimeout(function(e){return function(){return e.setup()}}(this),1e3))}return i(t,e),t.prototype.setup=function(){return this.hwScript=document.querySelector("#HW_script"),this.badgeCont=document.querySelector(this.hwScript.dataset.selector),this.elements={frameCont:document.createElement("div"),frame:document.createElement("iframe"),framePeak:document.createElement("div"),badge:document.createElement("span")},this.styles={badge:"border-radius: 20px;\ndisplay: none;\nbackground: #CD4B5B;\nheight: 16px;\nwidth: 16px;\ncolor: #fff;\ntext-align: center;\nline-height: 16px;\nfont-size: 11px;\nfont-weight: bold;\ncursor: pointer;\n"+this.vendorPrefix()+"-transform: scale(0);\n"+this.vendorPrefix()+"-transition: all 0.3s;",frameCont:"display: none;\nborder-radius: 4px;\nbox-shadow: 0px 10px 60px 0px rgba(0, 0, 0, 0.3);\nbackground: #fff;\nborder: none;\nposition: absolute;\nz-index: 999;\nwidth: 300px;\nheight: 300px;\n"+this.vendorPrefix()+"-transition: all 0.3s;",framePeak:'width: 20px;\nheight: 20px;\ncontent: "";\nposition: absolute;\nz-index: 888;\ntop: -10px;\nleft: 28px;\nbackground: #fff;\nbox-shadow: 0px 10px 60px 0px rgba(0, 0, 0, 0.3);\n'+this.vendorPrefix()+"-transform: rotate(45deg);",frame:"background: #fff;\nborder: none;\nwidth: 100%;\nheight: 100%;\noverflow: hidden;\nborder-radius: 4px;\nposition: relative;\nz-index: 900;\n"+this.vendorPrefix()+"-transition: all 0.3s;"},this.createElements(),this.attachListeners()},t.prototype.createElements=function(){var e;return this.badgeCont.appendChild(this.elements.badge),this.elements.badge.id="HW_badge",this.elements.badge.setAttribute("style",this.styles.badge),this.elements.badge.addEventListener("click",this.toggle,!1),document.body.appendChild(this.elements.frameCont),this.elements.frameCont.id="HW_frame_cont",this.elements.frameCont.setAttribute("style",this.styles.frameCont),this.elements.frameCont.appendChild(this.elements.framePeak),this.elements.framePeak.id="HW_frame_peak",this.elements.framePeak.setAttribute("style",this.styles.framePeak),e="0.0.0.0"===document.location.hostname?"//127.0.0.1.xip.io:3002/widget/jsfiddle.html":"//headwayapp.co/widget/jsfiddle.html",this.elements.frameCont.appendChild(this.elements.frame),this.elements.frame.id="HW_frame",this.elements.frame.src=e,this.elements.frame.setAttribute("style",this.styles.frame),document.body.addEventListener("click",function(e){return function(t){return e.visible?e.hide():void 0}}(this),!1)},t.prototype.attachListeners=function(){var e;return e=function(e){return function(t){var n,i;switch(i=t.data[0],n=t.data[1],i){case"setHeight":return e.setHeight(n);case"setBadge":return e.setBadge(n);case"widgetReady":return e.widgetReady(n);case"hide":return e.hide();case"show":return e.show();case"reload":return e.reload();case"update":return e.update(n)}}}(this),window.addEventListener("message",e,!1)},t.prototype.show=function(e){var t,n;return this.visible=!0,n=e.getBoundingClientRect(),t={top:35,left:this.softHide?33:30},this.elements.frameCont.style.top=n.top+t.top+"px",this.elements.frameCont.style.left=n.left-t.left+"px",this.elements.frameCont.style.display="block"},t.prototype.hide=function(){return this.visible=!1,this.elements.frameCont.style.display="none",this.elements.frame.contentWindow.postMessage(["restore",{}],"*")},t.prototype.reload=function(){return this.elements.frame.contentWindow.location.reload()},t.prototype.toggle=function(e){return e.preventDefault(),e.stopPropagation(),this.visible?this.hide():this.show(e.toElement)},t.prototype.setBadge=function(e){return e.counter>=1?(this.elements.badge.style[this.vendorPrefix()+"-transform"]="scale(1)",this.elements.badge.innerHTML=e.counter):e.softHide?(this.softHide=!0,this.elements.badge.style[this.vendorPrefix()+"-transform"]="scale(0.5)",this.elements.badge.innerHTML=""):(this.softHide=!1,this.elements.badge.style[this.vendorPrefix()+"-transform"]="scale(0)",this.elements.badge.innerHTML=e.counter,this.hide())},t.prototype.setHeight=function(e){return this.elements.frame.style.height=e.height+"px",this.elements.frameCont.style.height=e.height+"px"},t.prototype.widgetReady=function(e){return this.elements.badge.style.display="block",window.setTimeout(function(t){return function(){return t.setBadge(e)}}(this),1e3)},t.prototype.update=function(e){return this.setBadge(e),this.reload()},t}(e))}).call(this);